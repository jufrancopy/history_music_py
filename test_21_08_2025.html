<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen de MÃºsica Paraguaya</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #ff6b6b, #ffd93d);
            padding: 30px;
            text-align: center;
            color: white;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
        }
        
        .student-info {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }
        
        .student-info h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .question {
            background: #fff;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            transition: all 0.3s ease;
        }
        
        .question:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }
        
        .question-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .question-number {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .question-text {
            font-size: 1.1em;
            font-weight: 600;
            color: #333;
            flex: 1;
        }
        
        .options {
            display: grid;
            gap: 12px;
        }
        
        .option {
            position: relative;
        }
        
        .option label {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
        }
        
        .option label:hover {
            background: #e9ecef;
            border-color: #667eea;
        }
        
        .option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
            accent-color: #667eea;
        }
        
        .option label.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .start-exam-btn, .submit-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
            min-width: 200px;
        }
        
        .start-exam-btn:hover, .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .exam-section {
            display: none;
        }
        
        .exam-section.active {
            display: block;
        }
        
        .progress-bar {
            background: #f0f0f0;
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .results {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }
        
        .results.show {
            display: block;
        }
        
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            font-size: 2em;
            font-weight: bold;
            color: white;
        }
        
        .score-excellent {
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
        }
        
        .score-good {
            background: linear-gradient(135deg, #FF9800, #FFC107);
        }
        
        .score-poor {
            background: linear-gradient(135deg, #F44336, #FF5722);
        }
        
        .download-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(76, 175, 80, 0.3);
        }
        
        .hidden {
            display: none !important;
        }
        
        @media (max-width: 600px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 20px;
            }
            
            .question {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Barra de navegaciÃ³n -->
    <nav class="navbar">
        <a href="index.html">
            <img src="historia.png" alt="Logo" class="nav-logo">
        </a>
        <button class="menu-toggle" aria-label="MenÃº">â˜°</button>
        <ul class="nav-menu">
            <li class="nav-item"><a href="../index.html" class="nav-link">Inicio</a></li>
            <li class="nav-item"><a href="index.html" class="nav-link">Historia de la MÃºsica</a></li>
            <li class="nav-item"><a href="../intro_filosofia/index.html" class="nav-link">FilosofÃ­a</a></li>
            <li class="nav-item"><a href="../contact.html" class="nav-link">Contacto</a></li>
            <li class="nav-item"><a href="test_21_08_2025.html" class="nav-link">Test</a></li>
        </ul>
    </nav>
    <div class="container">
        <div class="header">
            <h1>ðŸŽµ Examen de MÃºsica Paraguaya</h1>
            <p>EvaluaciÃ³n de conocimientos sobre la mÃºsica tradicional del Paraguay</p>
        </div>
        
        <div class="content">
            <!-- InformaciÃ³n del estudiante -->
            <div id="student-info-section" class="student-info">
                <h2>InformaciÃ³n del Estudiante</h2>
                <div class="form-group">
                    <label for="firstName">Nombre:</label>
                    <input type="text" id="firstName" placeholder="Ingrese su nombre" required>
                </div>
                <div class="form-group">
                    <label for="lastName">Apellido:</label>
                    <input type="text" id="lastName" placeholder="Ingrese su apellido" required>
                </div>
                <div class="form-group">
                    <label for="email">Correo ElectrÃ³nico:</label>
                    <input type="email" id="email" placeholder="ejemplo@correo.com" required>
                </div>
                <button class="start-exam-btn" onclick="startExam()">Comenzar Examen</button>
            </div>
            
            <!-- SecciÃ³n del examen -->
            <div id="exam-section" class="exam-section">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <div id="questions-container"></div>
                <button class="submit-btn" onclick="submitExam()">Finalizar Examen</button>
            </div>
            
            <!-- Resultados -->
            <div id="results-section" class="results">
                <h2>Â¡Examen Completado!</h2>
                <div id="score-display" class="score-circle">
                    <span id="score-text">0/30</span>
                </div>
                <div id="student-name-display" style="font-size: 1.5em; margin: 20px 0; font-weight: bold;"></div>
                <div id="percentage-display" style="font-size: 1.2em; margin: 10px 0;"></div>
                <div id="grade-display" style="font-size: 1.3em; margin: 10px 0; font-weight: bold;"></div>
                <button class="download-btn" onclick="downloadResults()">ðŸ“¸ Descargar Certificado</button>
            </div>
        </div>
    </div>

    <canvas id="results-canvas" style="display: none;"></canvas>

    <script>
        const questions = [
            {
                question: "Â¿QuÃ© tipo de instrumento son los membranÃ³fonos?",
                options: [
                    "Instrumentos de cuerda",
                    "Instrumentos de percusiÃ³n",
                    "Instrumentos de viento",
                    "Instrumentos que producen sonido mediante la vibraciÃ³n de una membrana"
                ],
                answer: "Instrumentos que producen sonido mediante la vibraciÃ³n de una membrana"
            },
            {
                question: "Â¿CuÃ¡l de los siguientes instrumentos es un aerÃ³fono?",
                options: ["Anguapu", "Mimby", "Takuapu", "Mbaraka"],
                answer: "Mimby"
            },
            {
                question: "Â¿QuÃ© instrumento guaranÃ­ es conocido como el tambor ceremonial?",
                options: ["Mbaraka", "Anguapu", "Mimby", "Takuapu"],
                answer: "Anguapu"
            },
            {
                question: "Â¿CuÃ¡l es la tÃ©cnica de ejecuciÃ³n del Takuapu?",
                options: ["Soplo directo", "PercusiÃ³n de suelo", "Sacudimiento", "PulsaciÃ³n"],
                answer: "PercusiÃ³n de suelo"
            },
            {
                question: "Â¿QuÃ© funciÃ³n cumple el Mbaraka en la cultura guaranÃ­?",
                options: ["ComunicaciÃ³n espiritual", "Ritual comunitario", "Instrumento femenino", "CuraciÃ³n espiritual"],
                answer: "CuraciÃ³n espiritual"
            },
            {
                question: "Â¿QuÃ© instrumento se utiliza para convocar a la comunidad en ceremonias?",
                options: ["Mimby", "PopuguaÃ­", "KumbijÃ¡re", "TakuapÃ­"],
                answer: "PopuguaÃ­"
            },
            {
                question: "Â¿CuÃ¡l es el nombre del sacerdote en la cultura mbya-guaranÃ­?",
                options: ["KuÃ±Ã¡ kuÃ©ry", "OpyguÃ¡", "Mbya", "VerÃ¡ ChunÃº"],
                answer: "OpyguÃ¡"
            },
            {
                question: "Â¿QuÃ© deidad representa el sol en la cosmologÃ­a mbya?",
                options: ["Ã‘amandÃº", "Jakaira Chy EtÃ©", "TakuÃ¡ VerÃ¡ Chy EtÃ©", "AguyjÃ©"],
                answer: "Ã‘amandÃº"
            },
            {
                question: "Â¿QuÃ© periodo abarca la mÃºsica guaranÃ­ en estado puro?",
                options: ["1537-1609", "1609-1767", "Pre-1537", "1767-1811"],
                answer: "Pre-1537"
            },
            {
                question: "Â¿QuiÃ©n fue un compositor jesuita que integrÃ³ elementos guaranÃ­es en su mÃºsica barroca?",
                options: ["Domingo Zipoli", "Francisco Pizarro", "Alejo GarcÃ­a", "Juan de Salazar"],
                answer: "Domingo Zipoli"
            },
            {
                question: "Â¿QuÃ© periodo abarca el desarrollo musical del Paraguay independiente?",
                options: ["1811-1870", "1609-1767", "1767-1811", "1537-1609"],
                answer: "1811-1870"
            },
            {
                question: "Â¿CuÃ¡l fue una de las caracterÃ­sticas musicales del perÃ­odo independiente?",
                options: [
                    "Uso exclusivo del espaÃ±ol en las letras",
                    "BilingÃ¼ismo musical: canciones en guaranÃ­ y espaÃ±ol",
                    "Predominancia de la mÃºsica europea",
                    "FusiÃ³n de gÃ©neros sin influencia indÃ­gena"
                ],
                answer: "BilingÃ¼ismo musical: canciones en guaranÃ­ y espaÃ±ol"
            },
            {
                question: "Â¿QuÃ© gÃ©nero musical se adaptÃ³ al arpa paraguaya durante este perÃ­odo?",
                options: ["Samba", "Polca Paraguaya", "Tango", "Bachata"],
                answer: "Polca Paraguaya"
            },
            {
                question: "Â¿QuÃ© tipo de mÃºsica se desarrollÃ³ especialmente durante el gobierno de Carlos Antonio LÃ³pez?",
                options: ["MÃºsica religiosa", "MÃºsica militar y patriÃ³tica", "MÃºsica de cÃ¡mara", "MÃºsica folclÃ³rica europea"],
                answer: "MÃºsica militar y patriÃ³tica"
            },
            {
                question: "Â¿CuÃ¡l de los siguientes instrumentos es considerado el nacional por excelencia en Paraguay?",
                options: ["Guitarra", "Arpa Paraguaya", "AcordeÃ³n", "Flauta Traversa"],
                answer: "Arpa Paraguaya"
            },
            {
                question: "Â¿QuiÃ©n fue un compositor destacado que escribiÃ³ himnos para Paraguay durante este perÃ­odo?",
                options: ["Francisco AcuÃ±a de Figueroa", "Domingo Zipoli", "Carlos Antonio LÃ³pez", "JosÃ© Gaspar RodrÃ­guez de Francia"],
                answer: "Francisco AcuÃ±a de Figueroa"
            },
            {
                question: "Â¿QuÃ© impacto tuvo la Guerra de la Triple Alianza en la mÃºsica paraguaya?",
                options: [
                    "El desarrollo de nuevos gÃ©neros musicales",
                    "La pÃ©rdida de gran parte del patrimonio musical",
                    "La introducciÃ³n de mÃºsica europea",
                    "El fortalecimiento de la mÃºsica indÃ­gena"
                ],
                answer: "La pÃ©rdida de gran parte del patrimonio musical"
            },
            {
                question: "Â¿QuÃ© tipo de mÃºsica se adaptÃ³ a los instrumentos y voces locales durante este perÃ­odo?",
                options: ["MÃºsica de cÃ¡mara", "MÃºsica folclÃ³rica europea", "MÃºsica Religiosa Criolla", "MÃºsica pop moderna"],
                answer: "MÃºsica Religiosa Criolla"
            },
            {
                question: "Â¿QuÃ© funciÃ³n tuvo la mÃºsica patriÃ³tica durante el perÃ­odo independiente?",
                options: [
                    "Entretenimiento personal",
                    "ExaltaciÃ³n nacional y celebraciÃ³n de la independencia",
                    "MÃºsica de danza exclusivamente",
                    "Rituales religiosos"
                ],
                answer: "ExaltaciÃ³n nacional y celebraciÃ³n de la independencia"
            },
            {
                question: "Â¿QuÃ© instrumento fue introducido durante el perÃ­odo lopizta?",
                options: ["Arpa Paraguaya", "Guitarra", "AcordeÃ³n", "Takuapu"],
                answer: "AcordeÃ³n"
            },
            {
                question: "Â¿CuÃ¡l era la caracterÃ­stica principal de la mÃºsica indÃ­gena antes del siglo XVI?",
                options: [
                    "Estructura compleja y estÃ©tica",
                    "ParticipaciÃ³n colectiva sin mÃºsicos especialistas",
                    "Influencia europea predominante",
                    "ComposiciÃ³n de mÃºsica escrita"
                ],
                answer: "ParticipaciÃ³n colectiva sin mÃºsicos especialistas"
            },
            {
                question: "Â¿QuiÃ©n fundÃ³ una casa y escuela de mÃºsica en 1543?",
                options: ["Gregorio de Acosta", "Padre Juan Gabriel Lezcano", "Domenico Zipoli", "Jean Vaisseau"],
                answer: "Padre Juan Gabriel Lezcano"
            },
            {
                question: "Â¿QuÃ© compositor italiano fue muy apreciado en las misiones jesuÃ­ticas?",
                options: ["Gregorio de Acosta", "Domenico Zipoli", "Anton Sepp", "Francisco Sauvageot de Dupuis"],
                answer: "Domenico Zipoli"
            },
            {
                question: "Â¿QuiÃ©n introdujo el arpa en Paraguay?",
                options: ["Domenico Zipoli", "Anton Sepp", "Pedro Comentale", "Francisco Sauvageot de Dupuis"],
                answer: "Anton Sepp"
            },
            {
                question: "Â¿QuÃ© instrumento tocaba Pedro Comentale, quien presentÃ³ mÃºsicos indÃ­genas en 1628?",
                options: ["Piano", "Guitarra", "Vihuela de arco", "Arpa"],
                answer: "Vihuela de arco"
            },
            {
                question: "Â¿QuiÃ©n es considerado el primer maestro de mÃºsica del Paraguay durante la Ã©poca de Francia?",
                options: ["Antonio MarÃ­a Quintana", "Anastasio RolÃ³n", "Francisco Sauvageot de Dupuis", "Indalecio Odriozola"],
                answer: "Antonio MarÃ­a Quintana"
            },
            {
                question: "Â¿QuÃ© obra es atribuida a Anastasio RolÃ³n?",
                options: ["Himno Nacional", "Campamento Cerro LeÃ³n", "Primer Himno PatriÃ³tico en guaranÃ­", "Habanera sinfÃ³nica"],
                answer: "Primer Himno PatriÃ³tico en guaranÃ­"
            },
            {
                question: "Â¿QuiÃ©n organizÃ³ la primera Orquesta Nacional subvencionada por el Estado en 1890?",
                options: ["Cantalicio Guerrero", "Francisco Sauvageot de Dupuis", "Luis Cavedagni", "Indalecio Odriozola"],
                answer: "Cantalicio Guerrero"
            },
            {
                question: "Â¿QuÃ© mÃºsico francÃ©s es considerado el presunto autor del Himno Nacional?",
                options: ["Indalecio Odriozola", "Francisco Sauvageot de Dupuis", "Cantalicio Guerrero", "Luis Cavedagni"],
                answer: "Francisco Sauvageot de Dupuis"
            },
            {
                question: "Â¿QuÃ© mÃºsico italiano realizÃ³ la primera reconstrucciÃ³n del Himno Nacional publicada en 1874?",
                options: ["Luis Cavedagni", "Domenico Zipoli", "Antonio MarÃ­a Quintana", "Francisco Sauvageot de Dupuis"],
                answer: "Luis Cavedagni"
            }
        ];

        let studentAnswers = {};
        let studentInfo = {};

        function startExam() {
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('email').value.trim();

            if (!firstName || !lastName || !email) {
                alert('Por favor, complete todos los campos antes de comenzar el examen.');
                return;
            }

            studentInfo = { firstName, lastName, email };
            
            document.getElementById('student-info-section').style.display = 'none';
            document.getElementById('exam-section').classList.add('active');
            
            renderQuestions();
        }

        function renderQuestions() {
            const container = document.getElementById('questions-container');
            container.innerHTML = '';

            questions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                
                questionDiv.innerHTML = `
                    <div class="question-header">
                        <div class="question-number">${index + 1}</div>
                        <div class="question-text">${q.question}</div>
                    </div>
                    <div class="options">
                        ${q.options.map((option, optIndex) => `
                            <div class="option">
                                <label>
                                    <input type="radio" name="question-${index}" value="${option}" 
                                           onchange="updateAnswer(${index}, '${option}'); updateProgress();">
                                    ${option}
                                </label>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                container.appendChild(questionDiv);
            });
        }

        function updateAnswer(questionIndex, answer) {
            studentAnswers[questionIndex] = answer;
            
            // Update visual feedback
            const labels = document.querySelectorAll(`input[name="question-${questionIndex}"]`);
            labels.forEach(input => {
                const label = input.parentElement;
                if (input.checked) {
                    label.classList.add('selected');
                } else {
                    label.classList.remove('selected');
                }
            });
        }

        function updateProgress() {
            const answered = Object.keys(studentAnswers).length;
            const total = questions.length;
            const percentage = (answered / total) * 100;
            
            document.getElementById('progress-fill').style.width = percentage + '%';
        }

        function submitExam() {
            if (Object.keys(studentAnswers).length !== questions.length) {
                alert('Por favor, responda todas las preguntas antes de finalizar el examen.');
                return;
            }

            const score = calculateScore();
            showResults(score);
        }

        function calculateScore() {
            let correct = 0;
            questions.forEach((q, index) => {
                if (studentAnswers[index] === q.answer) {
                    correct++;
                }
            });
            return correct;
        }

        function showResults(score) {
            document.getElementById('exam-section').style.display = 'none';
            document.getElementById('results-section').classList.add('show');
            
            const percentage = Math.round((score / questions.length) * 100);
            const fullName = `${studentInfo.firstName} ${studentInfo.lastName}`;
            
            document.getElementById('score-text').textContent = `${score}/${questions.length}`;
            document.getElementById('student-name-display').textContent = fullName;
            document.getElementById('percentage-display').textContent = `${percentage}%`;
            
            const scoreCircle = document.getElementById('score-display');
            let grade, gradeColor;
            
            if (percentage >= 80) {
                grade = 'Excelente';
                scoreCircle.className = 'score-circle score-excellent';
            } else if (percentage >= 60) {
                grade = 'Bueno';
                scoreCircle.className = 'score-circle score-good';
            } else {
                grade = 'Necesita mejorar';
                scoreCircle.className = 'score-circle score-poor';
            }
            
            document.getElementById('grade-display').textContent = grade;
        }

        function downloadResults() {
            const canvas = document.getElementById('results-canvas');
            const ctx = canvas.getContext('2d');
            
            // Set canvas size
            canvas.width = 800;
            canvas.height = 1000;
            
            // Background gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // White card background
            ctx.fillStyle = 'white';
            ctx.roundRect = function(x, y, w, h, r) {
                this.beginPath();
                this.moveTo(x + r, y);
                this.arcTo(x + w, y, x + w, y + h, r);
                this.arcTo(x + w, y + h, x, y + h, r);
                this.arcTo(x, y + h, x, y, r);
                this.arcTo(x, y, x + w, y, r);
                this.closePath();
                return this;
            }
            ctx.roundRect(50, 100, 700, 800, 20).fill();
            
            // Header
            ctx.fillStyle = '#333';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('ðŸŽµ CERTIFICADO DE EXAMEN', 400, 200);
            
            ctx.font = '32px Arial';
            ctx.fillStyle = '#666';
            ctx.fillText('MÃºsica Paraguaya', 400, 250);
            
            // Student name
            ctx.font = 'bold 36px Arial';
            ctx.fillStyle = '#333';
            ctx.fillText(`${studentInfo.firstName} ${studentInfo.lastName}`, 400, 350);
            
            // Email
            ctx.font = '24px Arial';
            ctx.fillStyle = '#666';
            ctx.fillText(studentInfo.email, 400, 390);
            
            // Score circle
            const score = calculateScore();
            const percentage = Math.round((score / questions.length) * 100);
            
            // Circle background
            ctx.beginPath();
            ctx.arc(400, 520, 100, 0, 2 * Math.PI);
            if (percentage >= 80) {
                ctx.fillStyle = '#4CAF50';
            } else if (percentage >= 60) {
                ctx.fillStyle = '#FF9800';
            } else {
                ctx.fillStyle = '#F44336';
            }
            ctx.fill();
            
            // Score text
            ctx.fillStyle = 'white';
            ctx.font = 'bold 48px Arial';
            ctx.fillText(`${score}/${questions.length}`, 400, 535);
            
            // Percentage
            ctx.fillStyle = '#333';
            ctx.font = 'bold 42px Arial';
            ctx.fillText(`${percentage}%`, 400, 680);
            
            // Grade
            let grade;
            if (percentage >= 80) grade = 'EXCELENTE';
            else if (percentage >= 60) grade = 'BUENO';
            else grade = 'NECESITA MEJORAR';
            
            ctx.font = 'bold 36px Arial';
            ctx.fillText(grade, 400, 740);
            
            // Date
            const now = new Date();
            const dateString = now.toLocaleDateString('es-ES', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            ctx.font = '20px Arial';
            ctx.fillStyle = '#666';
            ctx.fillText(`Fecha: ${dateString}`, 400, 820);
            
            // Download
            canvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `Certificado_${studentInfo.firstName}_${studentInfo.lastName}.png`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
        }
    </script>
</body>
</html>